////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                                            //
//      NNNNNNNN        NNNNNNNN   ffffffffffffffff           tttt                                               iiii                         //
//      N:::::::N       N::::::N  f::::::::::::::::f       ttt:::t                                              i::::i                        //
//      N::::::::N      N::::::N f::::::::::::::::::f      t:::::t                                               iiii                         //
//      N:::::::::N     N::::::N f::::::fffffff:::::f      t:::::t                                                                            //
//      N::::::::::N    N::::::N f:::::f       ffffffttttttt:::::ttttttt      aaaaaaaaaaaaa  nnnn  nnnnnnnn    iiiiiii   aaaaaaaaaaaaa        //
//      N:::::::::::N   N::::::N f:::::f             t:::::::::::::::::t      a::::::::::::a n:::nn::::::::nn  i:::::i   a::::::::::::a       //
//      N:::::::N::::N  N::::::Nf:::::::ffffff       t:::::::::::::::::t      aaaaaaaaa:::::an::::::::::::::nn  i::::i   aaaaaaaaa:::::a      //
//      N::::::N N::::N N::::::Nf::::::::::::f       tttttt:::::::tttttt               a::::ann:::::::::::::::n i::::i            a::::a      //
//      N::::::N  N::::N:::::::Nf::::::::::::f             t:::::t              aaaaaaa:::::a  n:::::nnnn:::::n i::::i     aaaaaaa:::::a      //
//      N::::::N   N:::::::::::Nf:::::::ffffff             t:::::t            aa::::::::::::a  n::::n    n::::n i::::i   aa::::::::::::a      //
//      N::::::N    N::::::::::N f:::::f                   t:::::t           a::::aaaa::::::a  n::::n    n::::n i::::i  a::::aaaa::::::a      //
//      N::::::N     N:::::::::N f:::::f                   t:::::t    tttttta::::a    a:::::a  n::::n    n::::n i::::i a::::a    a:::::a      //
//      N::::::N      N::::::::Nf:::::::f                  t::::::tttt:::::ta::::a    a:::::a  n::::n    n::::ni::::::ia::::a    a:::::a      //
//      N::::::N       N:::::::Nf:::::::f                  tt::::::::::::::ta:::::aaaa::::::a  n::::n    n::::ni::::::ia:::::aaaa::::::a      //
//      N::::::N        N::::::Nf:::::::f                    tt:::::::::::tt a::::::::::aa:::a n::::n    n::::ni::::::i a::::::::::aa:::a     //
//      NNNNNNNN         NNNNNNNfffffffff                      ttttttttttt    aaaaaaaaaa  aaaa nnnnnn    nnnnnniiiiiiii  aaaaaaaaaa  aaaa     //
//                                                                                                                                            //
//                                                                                                                                            //
//                                                               .:~7JY5PPP5YJ7~:.                                                            //    
//                                                        :7P#@@@@@@@@@@@@@@@@@@@#P7:                                                         //    
//                                                    .7B@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B7.                                                     //    
//                                                  !B@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B!                                                   //    
//                                                J@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@J                                                 //    
//                                              ?@@@@@@@@@@@@@@&GJ!^.......^!JG&@@@@@@@@@@@@@@?                                               //    
//                                            :&@@@@@@@@@@@@P~.                 .~P@@@@@@@@@@@@&:                                             //    
//                                           7@@@@@@@@@@@#!                         !#@@@@@@@@@@@7                                            //    
//                                          ?@@@@@@@@@@&~                             ~&@@@@@@@@@@?                                           //    
//                                         !@@@@@@@@@@P                                 P@@@@@@@@@@!                                          //    
//                                        .@@@@@@@@@@J                                   J@@@@@@@@@@.                                         //    
//                                        5@@@@@@@@@G                                     G@@@@@@@@@5                                         //    
//                                        @@@@@@@@@@.                                     .@@@@@@@@@@                                         //    
//                                       :@@@@@@@@@#                                       #@@@@@@@@@:                                        //    
//                                       ^@@@@@@@@@G                                       G@@@@@@@@@^                                        //    
//                                       ^@@@@@@@@@G                                       G@@@@@@@@@^                                        //    
//                                       ^@@@@@@@@@G                                       G@@@@@@@@@^                                        //    
//                                       ^@@@@@@@@@G                                       G@@@@@@@@@^                                        //    
//                                       ^@@@@@@@@@G                                       G@@@@@@@@@^                                        //    
//                                       ^@@@@@@@@@G                                       G@@@@@@@@@^                                        //    
//                                       :@@@@@@@@@G                                       G@@@@@@@@@:                                        //    
//                               .^!JYYYYG@@@@@@@@@&YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY&@@@@@@@@@GYYYYJ7^.                                //    
//                            .Y&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&Y.                             //    
//                          .G@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@G.                           //    
//                         .&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&.                          //    
//                         #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#                          //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&GY!^..     ..:^75#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@G!.                    :?#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#7.                          .Y&@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@#^                                7&@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@?                  .::::.            P@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@&:       &@&&&&@Y !G&@@@@@@@&5:         !@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@.        @@@@@@@&&@@@@@@@@@@@@@5         !@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@~         @@@@@@@@@@&##&@@@@@@@@@!         Y@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@#          @@@@@@@@B.     P@@@@@@@B         .@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@?          @@@@@@@@       .@@@@@@@#          #@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@7          @@@@@@@&       .@@@@@@@#          G@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@J          @@@@@@@&       .@@@@@@@#          B@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@B          @@@@@@@&       .@@@@@@@#          &@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@^         @@@@@@@&       .@@@@@@@#         J@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@&.        @@@@@@@&       .@@@@@@@#        ~@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@&.       @@@@@@@&       .@@@@@@@#       ~@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@!      ^~~~~~~^        ^^^^^~~:      Y@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@B:                                ~&@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B~                            7&@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&P~.                    .!G@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&P?~..        .:~JB&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                        .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                         //    
//                         &@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&                          //    
//                         :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:                          //    
//                          .B@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B.                           //    
//                            :P&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&P^                             //    
//                               .~J5PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP5J~.                                //    
//                                                                                                                                            //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                             
// SPDX-License-Identifier: MIT

// @title: Nftania NFT2.0
// @author: Nftania.com
// @custom: security-contact info@nftania.com
// @Contract: Nftania 

pragma solidity 0.8.15;

import "https://github.com/OpenZeppelin/openzeppelin-contracts/blob/07b1b472c0ac3e50963c8d52cd2dac6e7e05260c/contracts/token/ERC20/utils/SafeERC20.sol";

contract NftaniaVestingLocker {
    using SafeERC20 for IERC20;

    IERC20 private token;
    address private owner;
    address private immutable beneficiaryWallet;
    string private beneficiaryName;
    mapping (uint => uint) internal instalmentsTime;
    mapping (uint => uint) internal instalmentsAmount;
    mapping (uint => bool) internal instalmentsReleased;

    constructor(uint256 _amount, address _beneficiaryWallet, string memory _beneficiaryName) {
        owner = msg.sender;
        require (_beneficiaryWallet != address(0),"VestingLocker: beneficiary Wallet cannot be the address of zero");
        require (_amount > 0 ,"VestingLocker: Amount cannot be zero");
        beneficiaryWallet = _beneficiaryWallet; 
        beneficiaryName = _beneficiaryName; 
        setInstalmentsTimes();
        setInstalmentsAmounts(_amount);
    }

    fallback() external payable {}
    receive() external payable {}

    function setToken (IERC20 _token) public {
        require(owner == msg.sender,"VestingLocker: This function can be called by owner only");
        require (address(_token) != address(0),"VestingLocker: token cannot be the address of zero");
        token = _token;
    }

    function setInstalmentsTimes() internal {
        uint time = block.timestamp;
        uint month = 2629743; 
        instalmentsTime[1] = time + 0 * month;
        instalmentsTime[2] = time + 1 * month;
        instalmentsTime[3] = time + 2 * month;
        instalmentsTime[4] = time + 3 * month;
        instalmentsTime[5] = time + 4 * month;
    }

    function setInstalmentsAmounts(uint256 _amount) internal {
        uint256 instalment = (_amount * 10**18 )/5;
        instalmentsAmount[1] = instalment;
        instalmentsAmount[2] = instalment;
        instalmentsAmount[3] = instalment;
        instalmentsAmount[4] = instalment;
        instalmentsAmount[5] = instalment;
    }

    function getLockInfo() public view returns (address _owner, IERC20 _token, address _benefeciaryWallet, string memory _beneficiaryName, uint256 contractBalance) {
        require (address(token) != address(0),"VestingLocker:  token is not set yet, token should defined in advance");
        contractBalance = token.balanceOf(address(this));
        return (owner, token, beneficiaryWallet, beneficiaryName, contractBalance);
    }

    function getInstallmentInfo(uint instalmentId) public view virtual 
    returns (uint256 instalmentTime, uint256 instalmentAmount, bool instalmentIsReleased, uint remainingTime) {
        instalmentTime = instalmentsTime[instalmentId];
        instalmentAmount = instalmentsAmount[instalmentId];
        instalmentIsReleased = instalmentsReleased[instalmentId];
        if (instalmentTime > block.timestamp)  {
            remainingTime = instalmentTime - block.timestamp;
        }
        else {
            remainingTime = 0;
        }
        return (instalmentTime, instalmentAmount, instalmentIsReleased, remainingTime);
    }

    function releaseInstalment(uint instalmentId) public virtual {
        require(block.timestamp >= instalmentsTime[instalmentId], "VestingLocker: current time is before instalmemt time");
        require(instalmentsReleased[instalmentId] == false, "VestingLocker: this instalment is already released");
        uint256 amount = instalmentsAmount[instalmentId];
        require(token.balanceOf(address(this)) >= amount, "VestingLocker: no more tokens to release");
        instalmentsReleased[instalmentId] = true;
        token.safeTransfer(beneficiaryWallet, amount);
    }


}