{"status": "1", "message": "OK", "result": [{"SourceCode": "// This is ERC 2.0 Token's Trading Market, Decentralized Exchange. \r\n// by he.guanjun, email: he.d.d.shan@hotmail.com\r\n// 2017-09-27\r\n// TODO\uff1a\r\n//  1,\u6bcf\u4e00\u4e2afunction\uff0c\u90fd\u5e94\u8be5\u5199\u65e5\u5fd7\uff08\u4e8b\u4ef6\uff09\uff0c\u800c\u4e14\u6700\u597d\u4e0d\u8981\u516c\u7528\u4e8b\u4ef6\u3002\u6682\u4e0d\u5904\u7406\u3002\r\n//  2,Token\u767d\u540d\u5355\uff0c\u66f4\u5b89\u5168\uff0c\u4f46\u662f\u9700\u8981owner\u7ef4\u62a4\uff0c\u66f4\u9ebb\u70e6\u3002\u6682\u4e0d\u5904\u7406\u3002\r\n\r\n\r\npragma solidity ^0.4.11; \r\n\r\n// ERC Token Standard #20 Interface\r\n// https://github.com/ethereum/EIPs/issues/20\r\ninterface Erc20Token {\r\n      function totalSupply() constant returns (uint256 totalSupply);\r\n      function balanceOf(address _owner) constant returns (uint256 balance);\r\n\r\n      function transfer(address _to, uint256 _value) returns (bool success);\r\n\r\n      function allowance(address _owner, address _spender) constant returns (uint256 remaining);\r\n      function approve(address _spender, uint256 _value) returns (bool success);\r\n      function transferFrom(address _from, address _to, uint256 _value) returns (bool success);\r\n\r\n      event Transfer(address indexed _from, address indexed _to, uint256 _value);\r\n      event Approval(address indexed _owner, address indexed _spender, uint256 _value);\r\n\r\n      function approveAndCall(address _spender, uint256 _value, bytes _extraData) returns (bool success);\r\n}\r\n\r\ncontract Base { \r\n    uint createTime = now;\r\n\r\n    address public owner;\r\n    \r\n    function Base() {\r\n        owner = msg.sender;\r\n    }\r\n    \r\n    modifier onlyOwner {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n    \r\n    function transferOwnership(address _newOwner)  public  onlyOwner {\r\n        owner = _newOwner;\r\n    }\r\n\r\n    mapping (address => uint256) public userEtherOf;   \r\n\r\n    function userRefund() public   {\r\n         _userRefund(msg.sender, msg.sender);\r\n    }\r\n\r\n    function userRefundTo(address _to) public   {\r\n        _userRefund(msg.sender, _to);\r\n    }\r\n\r\n    function _userRefund(address _from,  address _to) private {\r\n        require (_to != 0x0);  \r\n        uint256 amount = userEtherOf[_from];\r\n        if(amount > 0){\r\n            userEtherOf[_from] -= amount;\r\n            _to.transfer(amount);               //\u9632\u8303\u5916\u90e8\u8c03\u7528\uff0c\u7279\u522b\u662f\u548c\u652f\u4ed8\uff08\u4e70Token\uff09\u8054\u5408\u8c03\u7528\u5c31\u6709\u98ce\u9669\uff0c 2017-09-27\r\n        }\r\n    }\r\n\r\n}\r\n\r\n//\u6267\u884c interface tokenRecipient { function receiveApproval(address _from, uint256 _value, address _token, bytes _extraData); }\r\ncontract  Erc20TokenMarket is Base         //for exchange token\r\n{\r\n    function Erc20TokenMarket()  Base ()  {\r\n    }\r\n\r\n    mapping (address => uint) public BadTokenOf;      //Token \u9ed1\u540d\u5355\uff01\r\n\r\n    function addBadToken(address _tokenAddress) public onlyOwner{\r\n        BadTokenOf[_tokenAddress] += 1;\r\n    }\r\n\r\n    function removeBadToken(address _tokenAddress) public onlyOwner{\r\n        BadTokenOf[_tokenAddress] = 0;\r\n    }\r\n\r\n    function isBadToken(address _tokenAddress) private returns(bool _result) {\r\n        return BadTokenOf[_tokenAddress] > 0;        \r\n    }\r\n\r\n    bool public hasSellerGuarantee = false;\r\n    \r\n    uint256 public sellerGuaranteeEther = 0 ether;      //\u4fdd\u8bc1\u91d1\uff0c\u6700\u5927\u60e9\u7f5a\u91d1\u989d\u3002\r\n\r\n    function setSellerGuarantee(bool _has, uint256 _gurateeEther) public onlyOwner {\r\n        require(now - createTime > 1 years);    //\u81f3\u5c11\u4e00\u5e74\u540e\u624d\u542f\u7528\u4fdd\u8bc1\u91d1\r\n        require(_gurateeEther < 0.1 ether);     //\u4e0d\u80fd\u592a\u9ad8\uff0c\u8868\u793a\u4e00\u4e0b\uff0c\u80fd\u591f\u62d2\u7edd\u6076\u610f\u8005\u5c31\u597d\u3002\r\n        hasSellerGuarantee = _has;\r\n        sellerGuaranteeEther = _gurateeEther;        \r\n    }    \r\n\r\n    function checkSellerGuarantee(address _seller) private returns (bool _result){\r\n        if (hasSellerGuarantee){\r\n            return userEtherOf[_seller] >= sellerGuaranteeEther;            //\u4fdd\u8bc1\u91d1\u4e0d\u5f3a\u5236\u51bb\u7ed3\uff0c\u5982\u679c\u4fdd\u8bc1\u91d1\u4e0d\u8db3\uff0c\u5c06\u65e0\u6cd5\u5b8c\u6210\u4ea4\u6613\uff08\u4e70\u548c\u5356\uff09\u3002\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function userRefundWithoutGuaranteeEther() public   {       //\u9000\u6b3e\uff0c\u4f46\u662f\u4fdd\u7559\u4fdd\u8bc1\u91d1\r\n        if (userEtherOf[msg.sender] >= sellerGuaranteeEther){\r\n            uint256 amount = userEtherOf[msg.sender] - sellerGuaranteeEther;\r\n            userEtherOf[msg.sender] -= amount;\r\n            msg.sender.transfer(amount); \r\n        }\r\n    }\r\n\r\n    struct SellingToken{                //TokenInfo\uff0c\u5305\u62ec\uff1a\u5f53\u524d\u91d1\u989d\uff0c\u5df2\u5356\u603b\u91d1\u989d\uff0c\u51fa\u552e\u4ef7\u683c\uff0c\u662f\u5426\u51fa\u552e\uff0c\u51fa\u552e\u65f6\u95f4\u9650\u5236\uff0c\u8f6c\u5165\u603b\u91d1\u989d\uff0c\u8f6c\u5165\u603b\u91d1\u989d\uff0c TODO\uff1a\r\n        uint256    thisAmount;          //currentAmount\uff0c\u5f53\u524d\u91d1\u989d\uff0c\u53ef\u4ee5\u51fa\u552e\u7684\u91d1\u989d,\u8f6c\u5165\u5230 this \u5730\u5740\u7684\u91d1\u989d\u3002\r\n        uint256    soldoutAmount;       //\u6709\u53ef\u80fd\u6ea2\u51fa\uff0c\u6076\u610f\u5408\u540c\u80fd\u505a\u5230\u8fd9\u70b9\uff0c\u4f46\u4e0d\u5f71\u54cd\u5408\u7ea6\u6267\u884c\uff0c\u6682\u4e0d\u5904\u7406\u3002 2017-09-27\r\n        uint256    price;      \r\n        bool       cancel;              //\u6b63\u5728\u51fa\u552e\uff0c\u662f\u5426\u51fa\u552e\r\n        uint       lineTime;            //\u51fa\u552e\u65f6\u95f4\u9650\u5236\r\n    }    \r\n\r\n    mapping (address => mapping(address => SellingToken)) public userSellingTokenOf;    //\u9500\u552e\u8005\uff0c\u4ee3\u5e01\u5730\u5740\uff0c\u9500\u552e\u4fe1\u606f\r\n\r\n    event OnSetSellingToken(address indexed _tokenAddress, address _seller, uint indexed _sellingAmount, uint256 indexed _price, uint _lineTime, bool _cancel);\r\n\r\n    function receiveApproval(address _from, uint256 _value, address _token, bytes _extraData) public {\r\n        _extraData;\r\n        _value;\r\n        require(_from != 0x0);\r\n        require(_token != 0x0);\r\n        //require(_value > 0);              //no\r\n        require(_token == msg.sender && msg.sender != tx.origin);   //\u9632\u8303\u653b\u51fb\uff0c\u9632\u6b62\u88ab\u53d1\u9001\u5927\u91cf\u7684\u5783\u573e\u4fe1\u606f\uff01\u5c31\u7b97\u653b\u51fb\uff0c\u4e5f\u8981\u5199\u4e00\u4e2a\u667a\u80fd\u5408\u7ea6\u6765\u653b\u51fb\uff01\r\n        require(!isBadToken(msg.sender));                           //\u9ed1\u540d\u5355\u5224\u65ad\uff0c\u4e3b\u8981\u9632\u8303\u5783\u573e\u4fe1\u606f\uff0c\r\n\r\n        Erc20Token token = Erc20Token(msg.sender);\r\n        var sellingAmount = token.allowance(_from, this);   //_from == tx.origin != msg.sender = _token , _from == tx.origin \u4e0d\u4e00\u5b9a\uff0c\u4f46\u4e00\u822c\u5982\u6b64\uff0c\u591a\u91cd\u7b7e\u540d\u94b1\u5305\u5c31\u4e0d\u662f\u3002\r\n\r\n        //var sa = token.balanceOf(_from);        //\u68c0\u67e5\u7528\u6237\u5b9e\u9645\u62e5\u6709\u7684Token\uff0c\u4f46\u7528\u6237\u62e5\u6709\u7684Token\u968f\u65f6\u53ef\u80fd\u53d8\u5316\uff0c\u6240\u4ee5\u8fd8\u662f\u65e0\u6cd5\u68c0\u67e5\uff0c\u53ea\u80fd\u5728\u8d2d\u4e70\u7684\u65f6\u5019\u68c0\u67e5\u3002\r\n        //if (sa < sellingAmount){\r\n        //    sellingAmount = sa;\r\n        //}\r\n\r\n        //require(sellingAmount > 0);       //no \r\n\r\n        var st = userSellingTokenOf[_from][_token];                 //\u7528\u6237(\u5356\u5bb6)\u5730\u5740\uff0c Token\u5730\u5740\uff0c\r\n        st.thisAmount = sellingAmount;\r\n        //st.price = 0;\r\n        //st.lineTime = 0;\r\n        //st.cancel = true;      \r\n        OnSetSellingToken(_token, _from, sellingAmount, st.price, st.lineTime, st.cancel);\r\n    }\r\n      \r\n    function setSellingToken(address _tokenAddress,  uint256 _price, uint _lineTime) public returns(uint256  _sellingAmount) {\r\n        require(_tokenAddress != 0x0);\r\n        require(_price > 0);\r\n        require(_lineTime > now);\r\n        require(!isBadToken(msg.sender));              //\u9ed1\u540d\u5355\r\n        require(checkSellerGuarantee(msg.sender));     //\u4fdd\u8bc1\u91d1\uff0c\r\n\r\n        Erc20Token token = Erc20Token(_tokenAddress);\r\n        _sellingAmount = token.allowance(msg.sender,this);      //\u9632\u8303\u5916\u90e8\u8c03\u7528\uff0c 2017-09-27\r\n\r\n        //var sa = token.balanceOf(_from);        //\u68c0\u67e5\u7528\u6237\u5b9e\u9645\u62e5\u6709\u7684Token\r\n        //if (sa < _sellingAmount){\r\n        //    _sellingAmount = sa;\r\n        //}\r\n\r\n        var st = userSellingTokenOf[msg.sender][_tokenAddress];\r\n        st.thisAmount = _sellingAmount;\r\n        st.price = _price;\r\n        st.lineTime = _lineTime;\r\n        st.cancel = false;\r\n\r\n        OnSetSellingToken(_tokenAddress, msg.sender, _sellingAmount, _price, _lineTime, st.cancel);\r\n    }   \r\n\r\n    function cancelSellingToken(address _tokenAddress)  public{ // returns(bool _result) delete , 2017-09-27\r\n        require(_tokenAddress != 0x0);    \r\n        //_result = false;       \r\n\r\n        var st = userSellingTokenOf[msg.sender][_tokenAddress];\r\n        st.cancel = true;\r\n        \r\n        Erc20Token token = Erc20Token(_tokenAddress);\r\n        var sellingAmount = token.allowance(msg.sender,this);   //\u9632\u8303\u5916\u90e8\u8c03\u7528\uff0c 2017-09-27\r\n        st.thisAmount = sellingAmount;\r\n        \r\n        OnSetSellingToken(_tokenAddress, msg.sender, sellingAmount, st.price, st.lineTime, st.cancel);\r\n    }    \r\n\r\n    event OnBuyToken(uint __ramianBuyerEtherAmount, address _buyer, address indexed _seller, address indexed _tokenAddress, uint256  _transAmount, uint256 indexed _tokenPrice, uint256 _ramianTokenAmount);\r\n\r\n    bool public _isBuying = false;              //lock \r\n\r\n    function setIsBuying()  public onlyOwner{   //sometime, _isBuying always is true???\r\n        _isBuying = false;        \r\n    }\r\n\r\n    function buyTokenFrom(address _seller, address _tokenAddress, uint256 _buyerTokenPrice) public payable returns(bool _result) {   \r\n        require(_seller != 0x0);\r\n        require(_tokenAddress != 0x0);\r\n        require(_buyerTokenPrice > 0);\r\n\r\n        require(!_isBuying);            //\u62d2\u7edd\u4e8c\u6b21\u8fdb\u5165\uff01   //\u9632\u8303\u5916\u90e8\u8c03\u7528\uff0c\u67d0\u4e9b\u7279\u6b8a\u5408\u7ea6\u53ef\u80fd\u65e0\u6cd5\u6210\u529f\u6267\u884c\u6b64\u65b9\u6cd5\uff0c\u4f46\u4e3a\u4e86\u5b89\u5168\u5c31\u8fd9\u4e48\u7b80\u5355\u5904\u7406\u3002 2017-09-27\r\n        _isBuying = true;               //\u52a0\u9501\r\n\r\n        userEtherOf[msg.sender] += msg.value;\r\n        if (userEtherOf[msg.sender] == 0){\r\n            _isBuying = false;\r\n            return; \r\n        }\r\n\r\n        Erc20Token token = Erc20Token(_tokenAddress);\r\n        var sellingAmount = token.allowance(_seller, this);     //\u5356\u5bb6\uff0c _spender   \r\n        var st = userSellingTokenOf[_seller][_tokenAddress];    //\u5356\u5bb6\uff0cToken\r\n\r\n        var sa = token.balanceOf(_seller);        //\u68c0\u67e5\u7528\u6237\u5b9e\u9645\u62e5\u6709\u7684Token\uff0c\u4f46\u7528\u6237\u62e5\u6709\u7684Token\u968f\u65f6\u53ef\u80fd\u53d8\u5316\uff0c\u53ea\u80fd\u5728\u8d2d\u4e70\u7684\u65f6\u5019\u68c0\u67e5\u3002\r\n        bool bigger = false;\r\n        if (sa < sellingAmount){                  //\u4e00\u79cd\u7b56\u7565\uff0c\u5356\u5bb6\u4ea4\u5b9a\u91d1\uff0c\u5982\u679c\u53d1\u73b0\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\uff0c\u5b9a\u91d1\u6ca1\u6536\uff0cowner \u548c \u4e70\u5bb6\u5e73\u5206\u5b9a\u91d1\u3002\r\n            sellingAmount = sa;\r\n            bigger = true;\r\n        }\r\n\r\n        if (st.price > 0 && st.lineTime > now && sellingAmount > 0 && !st.cancel){\r\n            if(_buyerTokenPrice < st.price){                                                //price maybe be changed!\r\n                OnBuyToken(userEtherOf[msg.sender], msg.sender, _seller, _tokenAddress, 0, _buyerTokenPrice, sellingAmount);\r\n                _result = false;\r\n                _isBuying = false;\r\n                return;\r\n            }\r\n\r\n            uint256 canTokenAmount =  userEtherOf[msg.sender]  / st.price;      \r\n            if(canTokenAmount > 0 && canTokenAmount *  st.price >  userEtherOf[msg.sender]){\r\n                 canTokenAmount -= 1;\r\n            }\r\n            if(canTokenAmount == 0){\r\n                OnBuyToken(userEtherOf[msg.sender], msg.sender, _seller, _tokenAddress, 0, st.price, sellingAmount);\r\n                _result = false;\r\n                _isBuying = false;\r\n                return;\r\n            }\r\n            if (canTokenAmount > sellingAmount){\r\n                canTokenAmount = sellingAmount; \r\n            }\r\n            \r\n            var etherAmount =  canTokenAmount *  st.price;      //\u8fd9\u91cc\u4e0d\u5b58\u5728\u6ea2\u51fa\uff0c\u56e0\u4e3a canTokenAmount =  userEtherOf[msg.sender]  / st.price;      2017-09-27\r\n            userEtherOf[msg.sender] -= etherAmount;                     //\u51cf\u5c11\u8bb0\u8d26\u91d1\u989d\r\n            //require(userEtherOf[msg.sender] >= 0);                      //\u5197\u4f59\u5224\u65ad: \u5fc5\u7136\uff0cuint\u6570\u636e\u7c7b\u578b\u30022017-09-27 delete\r\n\r\n            token.transferFrom(_seller, msg.sender, canTokenAmount);    //\u8f6c\u4ee3\u5e01, \uff0c\u9884\u9632\u7c7b\u4f3c the dao \u6f5c\u5728\u7684\u98ce\u9669       \r\n            if(userEtherOf[_seller]  >= sellerGuaranteeEther){          //\u5927\u4e8e\u7b49\u4e8e\u6700\u4f4e\u4fdd\u8bc1\u91d1\uff0c\u8fd9\u6837\u9f13\u52b1\u5356\u5bb6\u5b58\u7559\u4e00\u70b9\u4fdd\u8bc1\u91d1\u3002            \r\n                _seller.transfer(etherAmount);                          //\u8f6c\u4ee5\u592a\u5e01\uff0c\u9884\u9632\u7c7b\u4f3c the dao \u6f5c\u5728\u7684\u98ce\u9669      \r\n            }   \r\n            else{                                                       //\u5c0f\u4e8e\u6700\u4f4e\u4fdd\u8bc1\u91d1\r\n                userEtherOf[_seller] +=  etherAmount;                   //\u7531\u63a8\u6539\u4e3a\u62d6\uff0c\u66f4\u5b89\u5168\uff01 //\u8fd9\u91cc\u4e0d\u5b58\u5728\u6ea2\u51fa\uff0c2017-09-27\r\n            }      \r\n            st.soldoutAmount += canTokenAmount;                         //\u66f4\u65b0\u9500\u552e\u989d     //\u53ef\u80fd\u6ea2\u51fa\uff0c\u53ea\u6709\u6076\u610f\u8c03\u7528\u624d\u53ef\u80fd\u51fa\u73b0\u6ea2\u51fa\uff0c\u6ea2\u51fa\u4e5f\u4e0d\u5f71\u54cd\u4ea4\u6613\uff0c\u4e0d\u5904\u7406\u3002 2017-09-27\r\n            st.thisAmount = token.allowance(_seller, this);             //\u66f4\u65b0\u53ef\u9500\u552e\u4ee3\u5e01\u6570\u91cf\r\n\r\n            OnBuyToken(userEtherOf[msg.sender], msg.sender, _seller, _tokenAddress, canTokenAmount, st.price, st.thisAmount);     \r\n            _result = true;\r\n        }\r\n        else{\r\n            _result = false;\r\n            OnBuyToken(userEtherOf[msg.sender], msg.sender, _seller, _tokenAddress, 0, _buyerTokenPrice, sellingAmount);\r\n        }\r\n\r\n        if (bigger && sellerGuaranteeEther > 0){                                  //\u865a\u62a5\u53ef\u51fa\u552eToken\uff0c\u8981\u60e9\u7f5a\u5356\u5bb6\r\n            if(checkSellerGuarantee(_seller)) {          //\u865a\u62a5\u53ef\u51fa\u552eToken\uff0c\u628a\u6b64\u7528\u6237\u7684\u4fdd\u8bc1\u91d1\u5206\u4e86, owner \u548c buyer \u5747\u5206\uff0c\u7136\u540e\u7ee7\u7eed\u5904\u7406\uff1b\u5426\u5219\u4e0d\u80fd\u4ea4\u6613\u3002\r\n                userEtherOf[owner] +=  sellerGuaranteeEther / 2; \r\n                userEtherOf[msg.sender] +=   sellerGuaranteeEther - sellerGuaranteeEther / 2;   //\u9632\u6b62\u4e0d\u80fd\u88ab2\u6574\u9664\u7684\u60c5\u51b5\u3002  2017-09-27\r\n                userEtherOf[_seller] -= sellerGuaranteeEther;\r\n            }\r\n            else if (userEtherOf[_seller] > 0)     //Buyer\u53ef\u4ee5\u6076\u610f\u653b\u51fb\uff0c\u660e\u77e5\u5356\u5bb6\u4fdd\u8bc1\u91d1\u4e0d\u8db3\uff0c\u5c31\u6bcf\u6b21\u5c0f\u91d1\u989d\u7684\u8d2d\u4e70\u4ee3\u5e01\uff0c\u8ba9\u5356\u5bb6\u8d26\u4e0a\u59cb\u7ec8\u5c0f\u4e8e\u4fdd\u8bc1\u91d1\u91d1\u989d\uff0c\u8fd9\u79cd\u60c5\u51b5\u5176\u5b9e\u4e70\u5bb6\u4e5f\u4e0d\u5212\u7b97\uff0c\u6bd5\u7adfgas\u86ee\u8d35,\u800c\u4fdd\u8bc1\u91d1\u6700\u9ad8\u624d0.1 ether\uff0c\u6682\u4e0d\u5904\u7406\uff01\r\n            {\r\n                userEtherOf[owner] +=  userEtherOf[_seller] / 2; \r\n                userEtherOf[msg.sender] +=   userEtherOf[_seller] - userEtherOf[_seller] / 2;\r\n                userEtherOf[_seller] = 0;\r\n            }\r\n        }\r\n        \r\n        _isBuying = false;          //\u89e3\u9501\r\n        return;\r\n    }\r\n\r\n    function () public payable {\r\n        if(msg.value > 0){          //\u6765\u8005\u4e0d\u62d2\uff0c\u6bd4\u629b\u51fa\u5f02\u5e38\u6216\u8bb8\u66f4\u5408\u9002\u3002\r\n            userEtherOf[msg.sender] += msg.value;\r\n        }\r\n    }\r\n\r\n    bool private isDisTokening = false;     //add 2017-09-27\r\n\r\n    function disToken(address _token) public {          //\u5904\u7406\u6361\u5230\u7684\u5404\u79cdToken\uff0c\u4e5f\u5c31\u662f\u522b\u4eba\u8bef\u64cd\u4f5c\uff0c\u76f4\u63a5\u7ed9 this \u53d1\u9001\u4e86 token \u3002\u7531\u8c03\u7528\u8005\u548cOwner\u5e73\u5206\u3002\u56e0\u4e3a\u8fd9\u79cd\u8bef\u64cd\u4f5c\u5bfc\u81f4\u7684\u4e22\u5931\u8fc7\u53bb\u4e00\u5e74\u7684\u635f\u5931\u8fbe\u5230\u51e0\u5341\u4e07\u7f8e\u5143\u3002\r\n        require(!isDisTokening);            //\u62d2\u7edd\u4e8c\u6b21\u8fdb\u5165\uff01 2017-09-27\r\n        isDisTokening = true;               //\u52a0\u9501 2017-09-27\r\n\r\n        Erc20Token token = Erc20Token(_token);  //\u76ee\u524d\u53ea\u5904\u7406 ERC20 Token\uff0c\u90a3\u4e9b\u975e\u6807\u51c6Token\u5c31\u4f1a\u6c38\u4e45\u4e22\u5931\uff01\r\n        var amount = token.balanceOf(this);     //\u6709\u4e00\u5b9a\u98ce\u9669\uff0c2017-09-27\r\n        if (amount > 0){\r\n            var a1 = amount / 2;\r\n            if (a1 > 0){\r\n                token.transfer(msg.sender, a1); //\u6709\u4e00\u5b9a\u98ce\u9669\uff0c2017-09-27\r\n            }\r\n            var a2 = amount - a1;\r\n            if (a2 > 0){\r\n                token.transfer(owner, a2);      //\u6709\u4e00\u5b9a\u98ce\u9669\uff0c2017-09-27\r\n            }\r\n        }\r\n        isDisTokening = false;\r\n    }\r\n\r\n}", "ABI": "[{\"constant\":false,\"inputs\":[{\"name\":\"_tokenAddress\",\"type\":\"address\"}],\"name\":\"removeBadToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"address\"}],\"name\":\"userSellingTokenOf\",\"outputs\":[{\"name\":\"thisAmount\",\"type\":\"uint256\"},{\"name\":\"soldoutAmount\",\"type\":\"uint256\"},{\"name\":\"price\",\"type\":\"uint256\"},{\"name\":\"cancel\",\"type\":\"bool\"},{\"name\":\"lineTime\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"hasSellerGuarantee\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_token\",\"type\":\"address\"}],\"name\":\"disToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"userRefundTo\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"userEtherOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"name\":\"_price\",\"type\":\"uint256\"},{\"name\":\"_lineTime\",\"type\":\"uint256\"}],\"name\":\"setSellingToken\",\"outputs\":[{\"name\":\"_sellingAmount\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"userRefundWithoutGuaranteeEther\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"userRefund\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_value\",\"type\":\"uint256\"},{\"name\":\"_token\",\"type\":\"address\"},{\"name\":\"_extraData\",\"type\":\"bytes\"}],\"name\":\"receiveApproval\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenAddress\",\"type\":\"address\"}],\"name\":\"addBadToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"_isBuying\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenAddress\",\"type\":\"address\"}],\"name\":\"cancelSellingToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_seller\",\"type\":\"address\"},{\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"name\":\"_buyerTokenPrice\",\"type\":\"uint256\"}],\"name\":\"buyTokenFrom\",\"outputs\":[{\"name\":\"_result\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sellerGuaranteeEther\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"setIsBuying\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"BadTokenOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_has\",\"type\":\"bool\"},{\"name\":\"_gurateeEther\",\"type\":\"uint256\"}],\"name\":\"setSellerGuarantee\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_seller\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_sellingAmount\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"_price\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_lineTime\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_cancel\",\"type\":\"bool\"}],\"name\":\"OnSetSellingToken\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"__ramianBuyerEtherAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_buyer\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_seller\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_transAmount\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"_tokenPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_ramianTokenAmount\",\"type\":\"uint256\"}],\"name\":\"OnBuyToken\",\"type\":\"event\"}]", "ContractName": "Erc20TokenMarket", "CompilerVersion": "v0.4.17+commit.bdeb9e52", "OptimizationUsed": "0", "Runs": "200", "ConstructorArguments": "", "EVMVersion": "Default", "Library": "", "LicenseType": "", "Proxy": "0", "Implementation": "", "SwarmSource": "bzzr://9cf14565d2648868e3d26a33e72a18b5c52ecbcb1d5744d77d93a7c8ff868e85"}]}