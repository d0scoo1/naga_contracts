{"status": "1", "message": "OK", "result": [{"SourceCode": "// Verified using https://dapp.tools\n\n// hevm: flattened sources of src/spell.sol\n// SPDX-License-Identifier: AGPL-3.0-only\npragma solidity >=0.6.12 >=0.7.0;\n\n////// src/addresses_ff1.sol\n\n/* pragma solidity >=0.7.0; */\n\n// Gig Pool 1 addresses at Tue 05 Oct 2021 15:56:31 CEST\ncontract Addresses {\n\taddress public ROOT = 0x4B6CA198d257D755A5275648D471FE09931b764A;\n\taddress public TINLAKE_CURRENCY = 0x6B175474E89094C44Da98b954EedeAC495271d0F;\n\taddress public ASSESSOR = 0xCC2cA000DB7Df0499667ca4048987727151b0b1f;\n\taddress public RESERVE = 0xd9Cec614db2b5A7490dF2462A4621D96bCD4bfE2;\n\taddress public SENIOR_TRANCHE = 0xfc9E18e714c21539456d5f77F7F635781Cf56Af0;\n\taddress public JUNIOR_TRANCHE = 0x7DA307394B052Af46Aba415289db24177B754C7e;\n\taddress public SENIOR_MEMBERLIST = 0x6e79770F8B57cAd29D29b1884563556B31E792b0;\n\taddress public JUNIOR_MEMBERLIST = 0x3FBD11B1f91765B32BD1231922F1E32f6bdfCB1c;\n\taddress public SENIOR_TOKEN = 0x44718d306a8Fa89545704Ae38B2B97c06bF11FC1;\n\taddress public FEED = 0xcAB9ed8e5EF4607A97f4e22Ad1D984ADB93ce890;\n\taddress public MGR = 0x5b702e1fEF3F556cbe219eE697D7f170A236cc66;\n    address public VAT = 0x35D1b3F3D7966A1DFe207aa4514C12a259A0492B;\n    address public JUG = 0x19c0976f590D67707E62397C87829d896Dc0f1F1;\n    address public SPOTTER = 0x65C79fcB50Ca1594B025960e539eD7A9a6D434A3;\n\taddress public CLERK_OLD = 0x04140410249C4e9bB85f948135671Af30D941034;\n\taddress public COORDINATOR_OLD = 0x9dA6Ff36Fc054b7FD2F72935DD3A9cFbFc00B8B6;\t\n\taddress public POOL_ADMIN_OLD = 0x20ca8D29F1ad57e85A73c2aA99dFF46241C94A1A;\n}\n\n\n\n////// src/spell.sol\n/* pragma solidity >=0.6.12; */\n\n/* import \"./addresses_ff1.sol\"; */\n\n////// src/spell.sol\n/**\n *Submitted for verification at Etherscan.io on 2021-09-24\n*/\n\n// Verified using https://dapp.tools\n\n// hevm: flattened sources of src/spell.sol\n\n/* pragma solidity >=0.6.12; */\n\n////// src/spell.sol\n// Copyright (C) 2020 Centrifuge\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n/* pragma solidity >=0.6.12; */\n\ninterface AuthLike {\n    function rely(address) external;\n    function deny(address) external;\n    function wards(address) external returns(uint);\n}\n\ninterface TinlakeRootLike {\n    function relyContract(address, address) external;\n    function denyContract(address, address) external;\n}\n\ninterface FileLike {\n    function file(bytes32, uint) external;\n    function file(bytes32, address) external;\n}\n\ninterface DependLike {\n    function depend(bytes32, address) external;\n}\n\ninterface MigrationLike {\n        function migrate(address) external;\n}\n\ninterface SpellMemberlistLike {\n    function updateMember(address, uint) external;\n}\n\ninterface PoolAdminLike {\n    function setAdminLevel(address usr, uint level) external;\n}\n\ninterface PoolRegistryLike {\n    function file(address, bool, string memory, string memory) external;\n    function find(address pool) external view returns (bool live, string memory name, string memory data);\n}\n\n// spell to swap clerk, coordinator & poolAdmin\ncontract TinlakeSpell is Addresses {\n\n    bool public done;\n    string constant public description = \"Tinlake GigPool spell\";\n\n    // MAINNET ADDRESSES\n    // The contracts in this list should correspond to a tinlake deployment\n    // https://github.com/centrifuge/tinlake-pool-config/blob/master/mainnet-production.json\n\n    address public CLERK = 0x8Cc9fCb43620DdB9b1573Cf9a94a6E7c167e6125;\n    address public COORDINATOR = 0xA92c94818473F3583aDc69B85767949B2103eff7;\n    address public POOL_ADMIN = 0x9033540ceda3C436C0a62CBAD682f8F4fc75F287;\n\n    address public MEMBER_ADMIN = 0xB7e70B77f6386Ffa5F55DDCb53D87A0Fb5a2f53b;\n    address public LEVEL3_ADMIN1 = 0x7b74bb514A1dEA0Ec3763bBd06084e712c8bce97;\n    address public LEVEL1_ADMIN1 = 0x71d9f8CFdcCEF71B59DD81AB387e523E2834F2b8;\n    address public LEVEL1_ADMIN2 = 0x46a71eEf8DbcFcbAC7A0e8D5d6B634A649e61fb8;\n    address public LEVEL1_ADMIN3 = 0x9eDec77dd2651Ce062ab17e941347018AD4eAEA9;\n    address public LEVEL1_ADMIN4 = 0xEf270f8877Aa1875fc13e78dcA31f3235210368f;\n    address public LEVEL1_ADMIN5 = 0xddEa1De10E93c15037E83b8Ab937A46cc76f7009;\n    address public AO_POOL_ADMIN = 0xB170597E474CC124aE8Fe2b335d0d80E08bC3e37;\n\n    address public POOL_REGISTRY = 0xddf1C516Cf87126c6c610B52FD8d609E67Fb6033;\n\n    string constant public IPFS_HASH = \"Qmbb8UAtouEHUkZXwUWH1GLJnDPBqxccF43rjrWpjiTkRo\";\n\n    uint256 constant ONE = 10**27;\n    address self;\n    \n    function cast() public {\n        require(!done, \"spell-already-cast\");\n        done = true;\n        execute();\n    }\n\n    function execute() internal {\n       TinlakeRootLike root = TinlakeRootLike(address(ROOT));\n       self = address(this);\n       // permissions \n       root.relyContract(CLERK, self); // required to file riskGroups & change discountRate\n       root.relyContract(CLERK_OLD, self); // required to change the interestRates for loans according to new riskGroups\n       root.relyContract(SENIOR_TRANCHE, self);\n       root.relyContract(SENIOR_TOKEN, self);\n       root.relyContract(SENIOR_TRANCHE, self);\n       root.relyContract(JUNIOR_TRANCHE, self);\n       root.relyContract(SENIOR_MEMBERLIST, self);\n       root.relyContract(JUNIOR_MEMBERLIST, self);\n       root.relyContract(POOL_ADMIN, self);\n       root.relyContract(ASSESSOR, self);\n       root.relyContract(COORDINATOR, self);\n       root.relyContract(COORDINATOR_OLD, self);\n       root.relyContract(RESERVE, self);\n       root.relyContract(MGR, self);\n       root.relyContract(FEED, self);\n       \n       migrateClerk();\n       migrateCoordinator();\n       migratePoolAdmin();\n       updateRegistry();\n     }  \n\n    function migrateCoordinator() internal {\n        // migrate state\n        MigrationLike(COORDINATOR).migrate(COORDINATOR_OLD);\n\n        // migrate dependencies\n        DependLike(COORDINATOR).depend(\"assessor\", ASSESSOR);\n        DependLike(COORDINATOR).depend(\"juniorTranche\", JUNIOR_TRANCHE);\n        DependLike(COORDINATOR).depend(\"seniorTranche\", SENIOR_TRANCHE);\n\n        DependLike(CLERK).depend(\"coordinator\", COORDINATOR);\n\n        DependLike(SENIOR_TRANCHE).depend(\"coordinator\", COORDINATOR);\n        DependLike(JUNIOR_TRANCHE).depend(\"coordinator\", COORDINATOR);\n\n        // migrate permissions\n        AuthLike(ASSESSOR).rely(COORDINATOR); \n        AuthLike(ASSESSOR).deny(COORDINATOR_OLD);\n        AuthLike(JUNIOR_TRANCHE).rely(COORDINATOR); \n        AuthLike(JUNIOR_TRANCHE).deny(COORDINATOR_OLD); \n        AuthLike(SENIOR_TRANCHE).rely(COORDINATOR);\n        AuthLike(SENIOR_TRANCHE).deny(COORDINATOR_OLD);\n     }\n\n    function migratePoolAdmin() internal {\n        // setup dependencies \n        DependLike(POOL_ADMIN).depend(\"assessor\", ASSESSOR);\n        // DependLike(POOL_ADMIN).depend(\"lending\", CLERK); // set in clerk migration\n        DependLike(POOL_ADMIN).depend(\"seniorMemberlist\", SENIOR_MEMBERLIST);\n        DependLike(POOL_ADMIN).depend(\"juniorMemberlist\", JUNIOR_MEMBERLIST);\n        DependLike(POOL_ADMIN).depend(\"navFeed\", FEED);\n        DependLike(POOL_ADMIN).depend(\"coordinator\", COORDINATOR);\n\n        // setup permissions\n        AuthLike(ASSESSOR).rely(POOL_ADMIN);\n        AuthLike(ASSESSOR).deny(POOL_ADMIN_OLD);\n        // AuthLike(CLERK).rely(POOL_ADMIN); // set in clerk migration\n        // AuthLike(CLERK).deny(POOL_ADMIN_OLD);\n        AuthLike(JUNIOR_MEMBERLIST).rely(POOL_ADMIN);\n        AuthLike(JUNIOR_MEMBERLIST).deny(POOL_ADMIN_OLD);\n        AuthLike(SENIOR_MEMBERLIST).rely(POOL_ADMIN);\n        AuthLike(SENIOR_MEMBERLIST).deny(POOL_ADMIN_OLD);\n        AuthLike(FEED).rely(POOL_ADMIN);\n        AuthLike(FEED).deny(POOL_ADMIN_OLD);\n        AuthLike(COORDINATOR).rely(POOL_ADMIN);\n        AuthLike(COORDINATOR).deny(POOL_ADMIN_OLD);\n\n        // set lvl3 admins\n        AuthLike(POOL_ADMIN).rely(LEVEL3_ADMIN1);\n        // set lvl1 admins\n        PoolAdminLike(POOL_ADMIN).setAdminLevel(LEVEL1_ADMIN1, 1);\n        PoolAdminLike(POOL_ADMIN).setAdminLevel(LEVEL1_ADMIN2, 1);\n        PoolAdminLike(POOL_ADMIN).setAdminLevel(LEVEL1_ADMIN3, 1);\n        PoolAdminLike(POOL_ADMIN).setAdminLevel(LEVEL1_ADMIN4, 1);\n        PoolAdminLike(POOL_ADMIN).setAdminLevel(LEVEL1_ADMIN5, 1);\n        PoolAdminLike(POOL_ADMIN).setAdminLevel(AO_POOL_ADMIN, 1);\n        AuthLike(JUNIOR_MEMBERLIST).rely(MEMBER_ADMIN);\n        AuthLike(SENIOR_MEMBERLIST).rely(MEMBER_ADMIN);\n    }\n\n    function migrateClerk() internal {\n        // migrate state\n        MigrationLike(CLERK).migrate(CLERK_OLD);\n    \n        // dependencies\n        DependLike(CLERK).depend(\"assessor\", ASSESSOR);\n        DependLike(CLERK).depend(\"mgr\", MGR);\n        DependLike(CLERK).depend(\"coordinator\", COORDINATOR);\n        DependLike(CLERK).depend(\"reserve\", RESERVE); \n        DependLike(CLERK).depend(\"tranche\", SENIOR_TRANCHE);\n        DependLike(CLERK).depend(\"collateral\", SENIOR_TOKEN);\n        DependLike(CLERK).depend(\"spotter\", SPOTTER);\n        DependLike(CLERK).depend(\"vat\", VAT);\n        DependLike(CLERK).depend(\"jug\", JUG);\n\n        // permissions\n        AuthLike(CLERK).rely(RESERVE);\n        AuthLike(CLERK).rely(POOL_ADMIN);\n        AuthLike(SENIOR_TRANCHE).rely(CLERK);\n        AuthLike(RESERVE).rely(CLERK);\n        AuthLike(ASSESSOR).rely(CLERK);\n        AuthLike(MGR).rely(CLERK);\n\n        // adjust autohealing tolerance to unblock epoch exec\n        FileLike(CLERK).file(\"autoHealMax\", 3000 ether);\n\n        FileLike(MGR).file(\"owner\", CLERK);\n\n        DependLike(ASSESSOR).depend(\"lending\", CLERK);\n        DependLike(RESERVE).depend(\"lending\", CLERK);\n        DependLike(POOL_ADMIN).depend(\"lending\", CLERK);\n       \n        // restricted token setup\n        SpellMemberlistLike(SENIOR_MEMBERLIST).updateMember(CLERK, uint(-1));\n\n        // remove old clerk\n        AuthLike(SENIOR_TRANCHE).deny(CLERK_OLD);\n        AuthLike(RESERVE).deny(CLERK_OLD);\n        AuthLike(ASSESSOR).deny(CLERK_OLD);\n        AuthLike(MGR).deny(CLERK_OLD);\n    }\n\n    function updateRegistry() internal {\n        PoolRegistryLike(POOL_REGISTRY).file(ROOT, true, \"fortunafi-1\", IPFS_HASH);\n    }\n}\n", "ABI": "[{\"inputs\":[],\"name\":\"AO_POOL_ADMIN\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"ASSESSOR\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"CLERK\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"CLERK_OLD\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"COORDINATOR\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"COORDINATOR_OLD\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"FEED\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"IPFS_HASH\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"JUG\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"JUNIOR_MEMBERLIST\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"JUNIOR_TRANCHE\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LEVEL1_ADMIN1\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LEVEL1_ADMIN2\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LEVEL1_ADMIN3\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LEVEL1_ADMIN4\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LEVEL1_ADMIN5\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LEVEL3_ADMIN1\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MEMBER_ADMIN\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MGR\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"POOL_ADMIN\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"POOL_ADMIN_OLD\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"POOL_REGISTRY\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"RESERVE\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"ROOT\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"SENIOR_MEMBERLIST\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"SENIOR_TOKEN\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"SENIOR_TRANCHE\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"SPOTTER\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"TINLAKE_CURRENCY\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"VAT\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"cast\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"description\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"done\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]", "ContractName": "TinlakeSpell", "CompilerVersion": "v0.7.6+commit.7338295f", "OptimizationUsed": "0", "Runs": "200", "ConstructorArguments": "", "EVMVersion": "Default", "Library": "", "LicenseType": "", "Proxy": "0", "Implementation": "", "SwarmSource": ""}]}